<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="images/pg1.svg" type="image/x-icon" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <title>PokéGems Wiki</title>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">
      <a href="/">
        <img src="images/logo.png" alt="PokeGems Logo" />
      </a>
    </div>
    <ul class="nav-links">
      <li><a href="pokemon">Pokémon</a></li>
      <li><a href="characters">Characters</a></li>
      <li><a href="misc">Misc.</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Search Bar -->
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search the wiki..." />
      <button id="searchButton">Search</button>
      <div id="searchResults" class="search-results"></div>
    </div>

    <!-- Action Buttons -->
    <div class="button-container">
      <a href="https://store.playpokegems.com" target="_blank" class="stylized-button">
        <i class="fas fa-shop"></i>
      </a>
      <a href="https://map.playpokegems.com" target="_blank" class="stylized-button">
        <i class="fas fa-compass"></i>
      </a>
      <a href="https://discord.gg/vdMc5yU3Tu" target="_blank" class="stylized-button">
        <i class="fa-brands fa-discord"></i>
      </a>
    </div>

    <!-- Newsfeed Section -->
    <div class="newsfeed-container">
      <h2>Latest News</h2>
      <div id="newsfeed"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 PokéGems. All rights reserved.</p>
  </footer>

  <!-- Font Awesome for Icons -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>

  <!-- Search Functionality -->
  <script>
    const newsfeedContainer = document.getElementById("newsfeed");

    // Fetch and display newsfeed from localStorage
    function loadNewsfeed() {
      const savedNews = JSON.parse(localStorage.getItem("newsfeed")) || [];
      newsfeedContainer.innerHTML = ""; // Clear existing items
      savedNews.forEach((item) => {
        const newsItem = document.createElement("div");
        newsItem.classList.add("news-item");

        const newsTitle = document.createElement("h3");
        newsTitle.textContent = item.title;

        const newsContent = document.createElement("p");
        newsContent.textContent = item.content;

        newsItem.appendChild(newsTitle);
        newsItem.appendChild(newsContent);

        newsfeedContainer.appendChild(newsItem);
      });
    }

    // Handle search
    document.getElementById("searchButton").addEventListener("click", function () {
      const query = document.getElementById("searchInput").value.toLowerCase();
      const allLinks = [...document.querySelectorAll("a[href$='.html']")];

      const resultsContainer = document.getElementById("searchResults");
      resultsContainer.innerHTML = ""; // Clear previous results
      const matches = allLinks.filter((link) =>
        link.textContent.toLowerCase().includes(query)
      );

      if (matches.length > 0) {
        matches.forEach((match) => {
          const result = document.createElement("div");
          result.textContent = match.textContent;
          result.classList.add("search-result-item");
          result.onclick = () => (window.location.href = match.href);
          resultsContainer.appendChild(result);
        });
      } else {
        resultsContainer.textContent = "No results found!";
      }
    });

    // Load newsfeed on page load
    loadNewsfeed();
  </script>
</body>
</html>
